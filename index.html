<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Farm Rise â€” Projects & Shop</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  body { background:#050510; color:#f1f5f9; font-family:'Inter', sans-serif; margin:0; padding:2rem; }
  .grid { display:grid; gap:1.5rem; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
  .card { background: rgba(15,15,25,0.85); backdrop-filter: blur(8px); border:1px solid #00f6ff; border-radius:1rem; padding:1rem; text-align:center; transition: all 0.3s; }
  .card:hover { transform: translateY(-4px) scale(1.02); border-color:#ff007a; }
  .card img { width:100%; border-radius:0.75rem; margin-bottom:0.75rem; object-fit:cover; height:150px; }
  .card h3 { margin-bottom:0.5rem; font-weight:600; color:#00f6ff; }
  .btn { display:inline-block; margin:0.25rem; padding:0.4rem 0.8rem; border-radius:0.5rem; border:1px solid #00f6ff; color:#00f6ff; text-decoration:none; font-size:0.875rem; transition:0.3s; }
  .btn:hover { background:#00f6ff; color:#000; }
  footer { text-align:center; margin-top:3rem; font-size:0.85rem; color:#94a3b8; }
</style>
</head>
<body>

<h1 class="text-3xl mb-6 text-center font-bold text-[#00f6ff]">Farm Rise â€” Projects & Shop</h1>

<section class="grid" id="projectGrid"></section>

<footer>&copy; <span id="year"></span> Farm Rise</footer>

<script>
document.getElementById('year').textContent = new Date().getFullYear();

// links.json with only title & URL
fetch('links.json')
  .then(res => res.json())
  .then(items => {
    const grid = document.getElementById('projectGrid');

    items.forEach(async (item) => {
      // Try to fetch OG image
      let imgURL = 'https://via.placeholder.com/300x150?text=No+Image';

      try {
        const res = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(item.url)}`);
        const htmlText = await res.json();
        const parser = new DOMParser();
        const doc = parser.parseFromString(htmlText.contents, 'text/html');
        const ogImg = doc.querySelector('meta[property="og:image"]');
        if(ogImg && ogImg.content) imgURL = ogImg.content;
      } catch(err) {
        console.warn(`Could not fetch OG image for ${item.url}`);
      }

      const card = document.createElement('div');
      card.className = 'card';
      const shareButtons = `
        <a href="https://wa.me/?text=${encodeURIComponent(item.url)}" target="_blank" class="btn">ðŸ’¬ WhatsApp</a>
        <a href="https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(item.url)}" target="_blank" class="btn">ðŸ“˜ Facebook</a>
        <a href="#" onclick="navigator.clipboard.writeText('${item.url}'); alert('Link copied!'); return false;" class="btn">ðŸ“‹ Copy URL</a>
      `;

      card.innerHTML = `
        <img src="${imgURL}" alt="${item.title}">
        <h3>${item.title}</h3>
        <a href="${item.url}" target="_blank" class="btn">Open Site</a>
        <div class="mt-2">${shareButtons}</div>
      `;
      grid.appendChild(card);
    });
  })
  .catch(err => console.error('Error loading JSON:', err));
</script>

</body>
</html>
